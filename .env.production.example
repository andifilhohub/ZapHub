# ============================================
# ZapHub - Production Environment Template
# ============================================
# Copy this to .env and adjust values for your deployment

# ----------------
# Node Environment
# ----------------
NODE_ENV=production
LOG_LEVEL=info

# ----------------
# Server
# ----------------
PORT=3000

# ----------------
# Database (PostgreSQL)
# ----------------
DB_HOST=localhost
DB_PORT=5432
DB_NAME=zaphub_prod
DB_USER=zaphub
DB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# Database connection pool
DB_POOL_MIN=5
DB_POOL_MAX=50          # Tier 2: 50 | Tier 3: 30 per instance

# ----------------
# Redis
# ----------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=        # Optional: set for security
REDIS_DB=0

# ----------------
# Queue Settings (BullMQ)
# ----------------
QUEUE_CONCURRENCY=20         # Tier 1: 10 | Tier 2: 20 | Tier 3: 15
QUEUE_MAX_ATTEMPTS=5
QUEUE_BACKOFF_DELAY=2000

# ----------------
# Baileys / WhatsApp
# ----------------
AUTH_DATA_DIR=./auth_data    # Local filesystem or S3 path
SESSION_TIMEOUT_MS=300000    # 5 minutes
MAX_CONCURRENT_SESSIONS=100  # Tier 1: 50 | Tier 2: 200 | Tier 3: 300

# ----------------
# Security
# ----------------
API_KEY_ENABLED=true
API_KEY=your-super-secret-api-key-change-this-in-production
JWT_SECRET=your-jwt-secret-key-minimum-32-chars-long

# ----------------
# Webhook Delivery
# ----------------
WEBHOOK_TIMEOUT_MS=10000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY_MS=2000
WEBHOOK_MAX_BODY_SIZE=1048576  # 1MB

# ----------------
# Metrics (Optional)
# ----------------
METRICS_ENABLED=true
METRICS_PORT=9090

# ============================================
# Tier-Specific Configurations
# ============================================

# ------------------
# Tier 1 (1-50 clients)
# ------------------
# MAX_CONCURRENT_SESSIONS=50
# DB_POOL_MAX=20
# QUEUE_CONCURRENCY=10
# Hardware: 4GB RAM, 2 CPU cores

# ------------------
# Tier 2 (50-200 clients)
# ------------------
# MAX_CONCURRENT_SESSIONS=200
# DB_POOL_MAX=50
# QUEUE_CONCURRENCY=20
# Hardware: 16GB RAM, 4-8 CPU cores

# ------------------
# Tier 3 (200-1000+ clients)
# ------------------
# MAX_CONCURRENT_SESSIONS=300
# DB_POOL_MAX=30
# QUEUE_CONCURRENCY=15
# Hardware: 32GB RAM, 8 CPU cores (per instance)
# Deploy: 3-5 instances behind load balancer

# ============================================
# Performance Tuning (Advanced)
# ============================================

# Node.js heap size (uncomment to set)
# NODE_OPTIONS=--max-old-space-size=4096

# ============================================
# Monitoring & Alerting (Future)
# ============================================

# SENTRY_DSN=
# PROMETHEUS_ENDPOINT=
# GRAFANA_ENDPOINT=
